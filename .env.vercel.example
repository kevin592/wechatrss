# Vercel 部署环境变量示例
# 在 Vercel 控制台 -> Settings -> Environment Variables 中添加

# ========================================================================
# 必需变量（必须配置）
# ========================================================================

# PostgreSQL 数据库连接字符串（带 PgBouncer 连接池）
# 在 Vercel Console -> Storage -> Postgres -> .env.local 中找到
# 格式: postgres://username:password@host:port/dbname?pgbouncer=true
DATABASE_URL=""

# PostgreSQL 直连数据库字符串（用于 Prisma Migrate）
# 在 Vercel Console -> Storage -> Postgres -> .env.local 中找到
# 格式: postgres://username:password@host:port/dbname
DIRECT_DATABASE_URL=""

# 数据库类型（固定为 postgresql）
DATABASE_TYPE="postgresql"

# 服务器外网访问地址
# 格式: https://your-project.vercel.app
# 部署后修改为实际的 Vercel 域名
SERVER_ORIGIN_URL=""

# 微信读书转发服务地址（通常不需要修改）
PLATFORM_URL="https://weread.111965.xyz"

# Cron Job 访问密钥（随机生成 32 位字符串）
# 生成命令: openssl rand -hex 32
# 或使用在线工具生成随机字符串
CRON_SECRET=""

# ========================================================================
# 可选变量（根据需求配置）
# ========================================================================

# 访问授权码（留空或删除以关闭授权验证）
# 如果设置值，访问 tRPC API 时需要: Authorization: your-auth-code
# RSS 订阅源 /feeds/* 路径不受此限制
# AUTH_CODE=""

# 每分钟最大请求数（防止滥用，默认 60）
# MAX_REQUEST_PER_MINUTE=60

# RSS 订阅源模式
# 留空或删除: 默认模式
# 设置为 fulltext: 启用全文内容提取
# FEED_MODE="fulltext"

# 是否清理 HTML 内容（默认 false）
# ENABLE_CLEAN_HTML=false

# 连续更新延迟时间（秒，默认 60）
# UPDATE_DELAY_TIME=60

# 定时更新 Cron 表达式（默认 35 5,17 * * *）
# 表示每天 5:35 和 17:35 更新
# CRON_EXPRESSION="35 5,17 * * *"

# ========================================================================
# Server 配置（Vercel Serverless 环境通常不需要修改）
# ========================================================================

# HOST=0.0.0.0
# PORT=4000

# ========================================================================
# 配置说明
# ========================================================================

# 1. 部署前必须配置所有"必需变量"
# 2. 如果不设置 AUTH_CODE，则关闭授权验证
#    - Web 管理界面无需输入授权码
#    - RSS 订阅源 /feeds/* 本身就不需要授权
# 3. 部署后首次访问需要添加账号和订阅公众号
# 4. 数据库会自动迁移，无需手动执行

# ========================================================================
# 获取 Vercel Postgres 连接字符串
# ========================================================================

# 步骤:
# 1. 在 Vercel Console 创建 Postgres 数据库
# 2. 进入数据库详情页
# 3. 点击 .env.local 标签
# 4. 复制以下内容：
#    - POSTGRES_URL (作为 DATABASE_URL)
#    - POSTGRES_URL_NON_POOLING (作为 DIRECT_DATABASE_URL)

# ========================================================================
# 安全建议
# ========================================================================

# 生产环境建议：
# - 不使用 AUTH_CODE（留空），简化访问
# - 定期备份数据库（Vercel Postgres 自动备份）
# - 监控 Vercel 使用情况（免费额度）
